<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ted.shiro_demo.mapper.BookMapper">
    <resultMap id="resultMapSearch" type="com.ted.shiro_demo.entity.Books">
        <id property="id" column="id"/>
        <result property="author" column="author"/>
        <result property="isbn" column="isbn"/>
        <result property="name" column="name"/>
        <result property="pages" column="pages"/>
        <result property="price" column="price"/>
        <result property="publish" column="publish"/>
        <result property="publishTime" column="publish_Time"/>
        <result property="size" column="size"/>
        <result property="type" column="type"/>
    </resultMap>
    <select id="search" resultMap="resultMapSearch">
        select * from `t_books`
        <trim prefix="where" prefixOverrides="and">
            <if test="type != null and type !=''">
                `type` like concat('%',#{type},'%')
            </if>
            <if test="bookName != null and bookName !=''">
                and `book_name` like concat('%',#{bookName},'%')
            </if>
            <if test="authority != null and authority !=''">
                and `author` like concat('%',#{author},'%')
            </if>
        </trim>

    </select>
</mapper>